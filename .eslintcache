[{"C:\\programming\\active-citizen-2025\\src\\index.js":"1","C:\\programming\\active-citizen-2025\\src\\reportWebVitals.js":"2","C:\\programming\\active-citizen-2025\\src\\components\\App.js":"3","C:\\programming\\active-citizen-2025\\src\\components\\Petitions.js":"4","C:\\programming\\active-citizen-2025\\src\\components\\Header.js":"5","C:\\programming\\active-citizen-2025\\src\\contexts\\UserContext.js":"6","C:\\programming\\active-citizen-2025\\src\\components\\AddNew.js":"7","C:\\programming\\active-citizen-2025\\src\\components\\User.js":"8","C:\\programming\\active-citizen-2025\\src\\components\\Feed.js":"9","C:\\programming\\active-citizen-2025\\src\\components\\OpenedPetition.js":"10","C:\\programming\\active-citizen-2025\\src\\components\\SignInUpReq.js":"11","C:\\programming\\active-citizen-2025\\src\\components\\Categories.js":"12","C:\\programming\\active-citizen-2025\\src\\components\\Petition.js":"13","C:\\programming\\active-citizen-2025\\src\\components\\Category.js":"14","C:\\programming\\active-citizen-2025\\src\\utils\\poems.js":"15"},{"size":402,"mtime":1607870895648,"results":"16","hashOfConfig":"17"},{"size":362,"mtime":499162500000,"results":"18","hashOfConfig":"17"},{"size":3530,"mtime":1608540449453,"results":"19","hashOfConfig":"17"},{"size":471,"mtime":1608371984183,"results":"20","hashOfConfig":"17"},{"size":1741,"mtime":1608540449453,"results":"21","hashOfConfig":"17"},{"size":102,"mtime":1607870895647,"results":"22","hashOfConfig":"17"},{"size":7078,"mtime":1608481850358,"results":"23","hashOfConfig":"17"},{"size":6684,"mtime":1608562324994,"results":"24","hashOfConfig":"17"},{"size":484,"mtime":1608371984181,"results":"25","hashOfConfig":"17"},{"size":5424,"mtime":1608543021455,"results":"26","hashOfConfig":"17"},{"size":1325,"mtime":1608371984183,"results":"27","hashOfConfig":"17"},{"size":911,"mtime":1608371984181,"results":"28","hashOfConfig":"17"},{"size":1581,"mtime":1608471294839,"results":"29","hashOfConfig":"17"},{"size":524,"mtime":1608371984181,"results":"30","hashOfConfig":"17"},{"size":7930578,"mtime":1608287181644,"results":"31","hashOfConfig":"17"},{"filePath":"32","messages":"33","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},"qczmw7",{"filePath":"35","messages":"36","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"37","messages":"38","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"39","usedDeprecatedRules":"34"},{"filePath":"40","messages":"41","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"42","messages":"43","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"44","messages":"45","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"46","messages":"47","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":1,"source":"48","usedDeprecatedRules":"34"},{"filePath":"49","messages":"50","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"51","messages":"52","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"53","messages":"54","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"55","messages":"56","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"57","messages":"58","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"59","messages":"60","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"61","messages":"62","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"63","messages":"64","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},"C:\\programming\\active-citizen-2025\\src\\index.js",[],["65","66"],"C:\\programming\\active-citizen-2025\\src\\reportWebVitals.js",[],"C:\\programming\\active-citizen-2025\\src\\components\\App.js",["67","68"],"import React from 'react';\r\nimport '../index.css';\r\nimport {\r\n  Switch,\r\n  Route\r\n} from \"react-router-dom\";\r\nimport firebase from 'firebase/app';\r\nimport \"firebase/auth\";\r\nimport \"firebase/database\";\r\nimport UserContext from '../contexts/UserContext';\r\nimport Petitions from './Petitions';\r\nimport User from './User';\r\nimport Header from './Header';\r\nimport AddNew from './AddNew';\r\nimport OpenedPetition from './OpenedPetition';\r\nimport SignInUpReq from './SignInUpReq';\r\nimport Feed from './Feed';\r\nimport Categories from './Categories';\r\n\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyBRR8gvYPh4zoGSzmQcyDz4vtkiS66NDFU\",\r\n  authDomain: \"active2025citizen.firebaseapp.com\",\r\n  databaseURL: \"https://active2025citizen-default-rtdb.europe-west1.firebasedatabase.app\",\r\n  projectId: \"active2025citizen\",\r\n  storageBucket: \"active2025citizen.appspot.com\",\r\n  messagingSenderId: \"49359637610\",\r\n  appId: \"1:49359637610:web:afbe7368807433be4c8e13\"\r\n};\r\nfirebase.initializeApp(firebaseConfig);\r\n\r\nfunction App() {\r\n  const [petitions, setPetitions] = React.useState([]);\r\n  const [user, setUser] = React.useState({});\r\n  const [isReqOpened, setIsReqOpened] = React.useState(true);\r\n  React.useEffect(() => {\r\n    authUser();\r\n    getPetitions();\r\n  }, []); // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n  function getPetitions() {\r\n    const petitionsRef = firebase.database().ref('petitions/');\r\n    petitionsRef.on('value', (snapshot) => {\r\n      if (snapshot.val() === null) {\r\n        console.log('ничего нет');\r\n        return\r\n      }\r\n      const obj = snapshot.val();\r\n      const petitionArr = [];\r\n      for (let i = 0; i < Object.keys(obj).length; i++) {\r\n        const petition = obj[Object.keys(obj)[i]];\r\n        petition.id = Object.keys(obj)[i];\r\n        petitionArr.unshift(petition);\r\n      }\r\n      setPetitions(petitionArr);\r\n    })\r\n  }\r\n\r\n  function authUser() {\r\n    firebase.auth().onAuthStateChanged(function(user) {\r\n      if (user) {\r\n        getUserData(user.uid);\r\n      } else {\r\n        console.log('no user');\r\n        }\r\n    });   \r\n  }\r\n\r\n  function getUserData(uid) {\r\n    const userRef = firebase.database().ref('users/'+ uid);\r\n    userRef.once('value', (snapshot) => {\r\n      if (snapshot.val() === null) {\r\n        console.log('ничего нет');\r\n        return\r\n      }\r\n      const obj = snapshot.val();\r\n      setUser(obj);\r\n      setIsReqOpened(true);\r\n    })\r\n  }\r\n\r\n  function closeRequest() {\r\n    setIsReqOpened(false);\r\n  }\r\n\r\n  function showDate(date) {\r\n    let day = new Date(date);\r\n    return `${day.toLocaleString('ru',{day: 'numeric', month: 'long', year: 'numeric'}).replace('г.', '')}`\r\n}\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <UserContext.Provider value={user}>\r\n        <div className=\"page\">\r\n          <Header setUser={setUser}/>\r\n          <main className=\"main\">\r\n            <Switch>\r\n              <Route exact path=\"/\">\r\n                {(!user.uid && isReqOpened) && <SignInUpReq closeRequest={closeRequest}/>}\r\n                <Feed petitions={petitions} showDate={showDate}/>\r\n              </Route>\r\n              <Route path=\"/user\">\r\n                <User/>\r\n              </Route>\r\n              <Route path=\"/add-new\">\r\n                <AddNew/>\r\n              </Route>\r\n              <Route path=\"/petitions/:pId\">\r\n                <OpenedPetition showDate={showDate}/>\r\n              </Route>\r\n            </Switch>\r\n          </main>\r\n        </div>\r\n      </UserContext.Provider>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","C:\\programming\\active-citizen-2025\\src\\components\\Petitions.js",[],"C:\\programming\\active-citizen-2025\\src\\components\\Header.js",[],"C:\\programming\\active-citizen-2025\\src\\contexts\\UserContext.js",[],"C:\\programming\\active-citizen-2025\\src\\components\\AddNew.js",["69","70"],"import React from 'react';\r\nimport poems from '../utils/poems';\r\nimport firebase from 'firebase/app';\r\nimport \"firebase/database\";\r\nimport \"firebase/storage\";\r\nimport UserContext from '../contexts/UserContext';\r\nimport addImageButton from '../styles/images/add-new__image-btn.svg';\r\nimport Categories from './Categories';\r\nimport {\r\n  useHistory\r\n} from \"react-router-dom\";\r\nimport classNames from 'classnames';\r\n\r\nfunction AddNew() {\r\n  const user = React.useContext(UserContext);\r\n  const inputRef = React.useRef();\r\n  const fileInputRef = React.useRef();\r\n  const [title, setTitle] = React.useState('');\r\n  const [text, setText] = React.useState('');\r\n  const [isDisabled, setisDisabled] = React.useState(true);\r\n  const [newPetitionKey, setNewPetitionKey] = React.useState('');\r\n  const [newPetitionImg, setNewPetitionImg] = React.useState('');\r\n  const [selectedCategory, setSelectedCategory] = React.useState('all');\r\n  const history = useHistory();\r\n\r\n  const buttonSelectors = classNames(\r\n    'button',\r\n    {\r\n      'button_disabled': isDisabled\r\n    }\r\n  )\r\n\r\n  const addNewImageSelectors = classNames(\r\n    'add-new__image',\r\n    {\r\n      'add-new__image_loaded': newPetitionImg != '',\r\n    }\r\n  )\r\n\r\n  React.useEffect(() => {\r\n    setNewPetitionKey(firebase.database().ref().child('petition').push().key);\r\n  }, []); // eslint-disable-line react-hooks/exhaustive-deps\r\n  React.useEffect(() => {\r\n    checkPetitionData();\r\n  }, [title, text, newPetitionImg, selectedCategory]); // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n  function findPoem(arr, str) {\r\n    let inputArr = str.trim().split(' ');\r\n    let result = {};\r\n    let maxCoincidences = 0;\r\n    for (let i = 0; i < arr.length; i++) {\r\n      let coincidences = 0;\r\n      for (let j = 0; j < inputArr.length; j++) {\r\n        if (arr[i].text.toLowerCase().includes(inputArr[j]) && (inputArr[j].length > 2)) {\r\n          coincidences++;\r\n        }\r\n      }\r\n      if (coincidences > maxCoincidences) {\r\n        maxCoincidences = coincidences;\r\n        result = arr[i];\r\n      }\r\n    }\r\n    return result\r\n  }\r\n  function handleSubmit(event) {\r\n    event.preventDefault(); \r\n    var petitionData = {\r\n      realText: inputRef.current.value,\r\n      poem: findPoem(poems, inputRef.current.value),\r\n      likes: [],\r\n      dislikes: [],\r\n      category: selectedCategory,\r\n      date: getCurrentDate(),\r\n      imgLink: newPetitionImg,\r\n      author: user.name\r\n    };\r\n\r\n    var updates = {};\r\n    updates['/petitions/' + newPetitionKey] = petitionData;\r\n    setTimeout(() => history.push('/'), 1000)\r\n    return firebase.database().ref().update(updates); \r\n  }\r\n\r\n  function translate() {\r\n    const poem = findPoem(poems, inputRef.current.value);\r\n    setTitle(poem.title);\r\n    setText(poem.text);\r\n  }\r\n\r\n  function getCurrentDate() {\r\n    let today = (new Date);\r\n    let metka = today.getTime();\r\n    return metka\r\n}\r\n  function previewFiles() {\r\n    if (fileInputRef.current.files.length === 0) {\r\n      setNewPetitionImg('');\r\n      return\r\n    }\r\n    const storageRef = firebase.storage().ref();\r\n    let file = fileInputRef.current.files[0];\r\n    let name = newPetitionKey;\r\n    storageRef.child(name).put(file).then(function(snapshot) {\r\n        snapshot.ref.getDownloadURL().then(function(downloadURL) {\r\n            setNewPetitionImg(downloadURL);\r\n        })\r\n    }); \r\n  }\r\n\r\n  function checkPetitionData() {\r\n    const regExp = /https?:\\/\\/w{0,3}[a-z0-9-._~:/?#[\\]@!$&'()*+,;=]*#?/gi;\r\n    if (text === '' || title === '' || inputRef.current.value.length < 3 || !regExp.test(newPetitionImg) || selectedCategory === 'all') {\r\n      setisDisabled(true);\r\n    } else {\r\n      setisDisabled(false);\r\n    }\r\n  }\r\n/*\r\nfunction getMaxLength() {\r\n  let maxStrLength = 0;\r\n  let moreThenFifty = 0;\r\n  let moreThenSixty = 0;\r\n  let moreThenSeventy = 0;\r\n  let moreThenEighty = 0;\r\n  let moreThenNinety = 0;\r\n  for (let i = 0; i < poems.length; i++) {\r\n    const strArr = poems[i].text.split('\\n');\r\n    for (let j = 0; j < strArr.length; j++) {\r\n\r\n      if (strArr[j].length > 50) {\r\n        moreThenFifty++;\r\n      }\r\n      if (strArr[j].length > 60) {\r\n        moreThenSixty++;\r\n      }\r\n      if (strArr[j].length > 70) {\r\n        moreThenSeventy++;\r\n      }\r\n      if (strArr[j].length > 80) {\r\n        moreThenEighty++;\r\n      }\r\n      if (strArr[j].length > 90) {\r\n        moreThenNinety++;\r\n      }\r\n\r\n      if (strArr[j].length > maxStrLength) {\r\n        maxStrLength = strArr[j].length;\r\n        console.log(strArr[j], i);\r\n      }\r\n    }\r\n  }\r\n  console.log(poems.length);\r\n  console.log('Количество строк, длинна которых');\r\n  console.log('>50', moreThenFifty);\r\n  console.log('>60', moreThenSixty);\r\n  console.log('>70', moreThenSeventy);\r\n  console.log('>80', moreThenEighty);\r\n  console.log('>90', moreThenNinety);\r\n}\r\n\r\n//getMaxLength();\r\n*/\r\n  return (\r\n    <section className=\"add-new\">\r\n      <h2 className=\"add-new__title\">Как разместить публикацию через портал ГРАЖДАНИН-ПОЭТ:</h2>\r\n      <ol className=\"add-new__direction\">\r\n        <li className=\"add-new__item\">Выберите наиболее подходящую к вашей публикации категорию из списка.</li>\r\n        <li className=\"add-new__item\">Коротко опишите суть своей публикации. Нажмите&nbsp;“Перевести”, чтобы увидеть ваш текст на языке поэзии.</li>\r\n        <li className=\"add-new__item\">Чтобы добавить фото, нажмите на <img className=\"add-new__item-image\" src={addImageButton} alt=\"#\"></img> Фото&nbsp;пройдёт&nbsp;моментальную модерацию.</li>\r\n        <li className=\"add-new__item\">Если перевод текста и вид фотографии вас устраивает, нажмите «Опубликовать». Или повторите процедуру.</li>\r\n      </ol>\r\n\r\n      <Categories setSelectedCategory={setSelectedCategory} selectedCategory={selectedCategory}/>\r\n\r\n      <form className=\"add-new__form\" onSubmit={handleSubmit}>\r\n        <input className=\"add-new__input\" type=\"text\" placeholder=\"Введите свой запрос\" ref={inputRef} required onChange={checkPetitionData}/>\r\n        <h3 className=\"add-new__poem-title\">{title}</h3>\r\n        <label className={addNewImageSelectors} style={{backgroundImage: 'url(' + newPetitionImg + ')',}}>\r\n          <input className=\"add-new__file-input\" type=\"file\" id=\"file\" ref={fileInputRef} onChange={previewFiles}/>\r\n          <p className=\"add-new__image-text\">Изображение публикации</p>\r\n        </label>\r\n        <p className=\"add-new__poem-text\">{text}</p>\r\n        <button className=\"button button_withborder\" type=\"button\" onClick={translate}>Перевести</button>\r\n        <button className={buttonSelectors} type=\"submit\" disabled={isDisabled}>Разместить</button>\r\n      </form>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default AddNew; \r\n","C:\\programming\\active-citizen-2025\\src\\components\\User.js",[],"C:\\programming\\active-citizen-2025\\src\\components\\Feed.js",[],"C:\\programming\\active-citizen-2025\\src\\components\\OpenedPetition.js",[],"C:\\programming\\active-citizen-2025\\src\\components\\SignInUpReq.js",[],"C:\\programming\\active-citizen-2025\\src\\components\\Categories.js",[],"C:\\programming\\active-citizen-2025\\src\\components\\Petition.js",[],"C:\\programming\\active-citizen-2025\\src\\components\\Category.js",[],"C:\\programming\\active-citizen-2025\\src\\utils\\poems.js",[],{"ruleId":"71","replacedBy":"72"},{"ruleId":"73","replacedBy":"74"},{"ruleId":"75","severity":1,"message":"76","line":11,"column":8,"nodeType":"77","messageId":"78","endLine":11,"endColumn":17},{"ruleId":"75","severity":1,"message":"79","line":18,"column":8,"nodeType":"77","messageId":"78","endLine":18,"endColumn":18},{"ruleId":"80","severity":1,"message":"81","line":36,"column":47,"nodeType":"82","messageId":"83","endLine":36,"endColumn":49},{"ruleId":"84","severity":1,"message":"85","line":91,"column":18,"nodeType":"86","messageId":"87","endLine":91,"endColumn":26,"fix":"88"},"no-native-reassign",["89"],"no-negated-in-lhs",["90"],"no-unused-vars","'Petitions' is defined but never used.","Identifier","unusedVar","'Categories' is defined but never used.","eqeqeq","Expected '!==' and instead saw '!='.","BinaryExpression","unexpected","new-parens","Missing '()' invoking a constructor.","NewExpression","missing",{"range":"91","text":"92"},"no-global-assign","no-unsafe-negation",[2838,2838],"()"]